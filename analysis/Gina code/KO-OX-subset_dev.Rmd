---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 


```{r setup, include=FALSE}
#This chunk is for setting global options for all chunks
knitr::opts_knit$set(root.dir = '/GitHub')
knitr::opts_chunk$set(message = FALSE)

#Searchable R Markdown reference: https://bookdown.org/yihui/rmarkdown-cookbook/

#Combining plots
#require(ggpubr)
#cfu_combo <- ggarrange(p_cfu_A17, p_cfu_R108, common.legend = TRUE)

#facet zoom
#facet_grid(. ~ background) 
#facet_zoom(ylim = c(1000000, 10000000)) #require(ggforce)) 
```

```{r load_libraries, echo=FALSE, results='hide',include=FALSE}
require(tidyverse)#data manipulation and ggplot
require(ggpubr)#combine plots
require(ggfortify)#heat maps
require(vegan)#ecological statistics
require(RColorBrewer)#color Palettes 

### For emulating ggplot colors ###
gg_color_hue <- function(n) {
  hues = seq(15, 375, length = n + 1)
  hcl(h = hues, l = 65, c = 100)[1:n]
}
mypal<-gg_color_hue(6)

#color palette for standard plots - colorblind friendly
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#D55E00", "#CC79A7")
cbbPalette <- c("#E69F00", "#D55E00","56B4E9" , "#CC79A7", "#009E73", "#0072B2","#F0E442" , "#000000")

#Allows visualization of a color Palette
#require(scales)
#show_col(cbPalette)

# Define a color and shape scheme for the whole manuscript
mycols<-data.frame(Type=c("AOR","Early","KO/OX","Late", "NILS","WT"), cols=cbPalette)
mycols$Type <- factor(mycols$Type, ordered=TRUE)

myshapes<-data.frame(Background=c("A17","R108","MS", "NILS"),shapes=c(8, 9, 10, 14))
myshapes$Background <- factor(myshapes$Background, ordered = TRUE)

```

```{r strain_freq_data, echo=FALSE, warning=FALSE}
#Import data and filter dataset
#geno_name <- read.delim("~/GitHub/HostMutants2021_C86meliloti/data/genotype_name.txt", sep="\t", header=TRUE)
freq_all<-read.table("~/GitHub/HostMutants2021_C86meliloti/data/freq.tsv", header=TRUE)
#C:\Users\Lab Manager\Documents\GitHub\HostMutants2021_C86meliloti\data
#initial = M_C86_NLA-D 
#culture gow-ups = M_C86_TYA-D
#exudate experiment = X_
#alfalfa S&R = M_888-890
#Wild types = M_860, M_869
freq_ex <- freq_all %>% filter(str_detect(sample_id,"X")) 
freq_ty <- freq_all %>% filter(str_detect(sample_id,"M_C86_TY"))
freq_int <- freq_all %>% filter(str_detect(sample_id, "M_C86_NL"))
freq_x <- rbind(freq_ex, freq_ty, freq_int)

```
